<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>imlonghao 的挖坑清单</title>
    <link rel="stylesheet" href="css/mdui.min.css">
    <script src="js/mdui.min.js"></script>
    <script src="js/jquery-3.2.1.min.js"></script>
</head>
<body class="mdui-theme-primary-grey mdui-bottom-nav-fixed">
<header>
    <div class="mdui-toolbar mdui-color-theme mdui-shadow-5">
        <h2 class="mdui-center">imlonghao 的挖坑清单</h2>
    </div>
</header>
<main style="margin-top: 1rem">
    <div class="mdui-container">
        <div class="mdui-row">
            <div class="mdui-col-xs-12 mdui-table-fluid">
                <table class="mdui-table mdui-table-hoverable" id="myTable">
                    <thead>
                    <tr>
                        <th>名称</th>
                        <th>状态</th>
                        <th>简述</th>
                        <th>开始于</th>
                        <th>更新于</th>
                        <th>终止于</th>
                        <th>已运行</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>
<footer>
    <div class="mdui-bottom-nav">
        <span>Copyright © 2017 imlonghao</span>
    </div>
</footer>
</body>
</html>
<script>
    function cal(s, e) {
        var start = s.split("-");
        var startDate = new Date(start[0], start[1] - 1, start[2]);
        var endDate;
        if (e instanceof Date) {
            endDate = e;
        } else {
            var end = e.split("-");
            endDate = new Date(end[0], end[1] - 1, end[2]);
        }
        return Math.floor((endDate - startDate) / 86400000)
    }
    projectList = [
        [
            'SM.MS Bot',
            '一个对接 SM.MS 图床的 Telegram 机器人',
            '2017-01-13',
            '2017-08-23',
            null,
            'https://t.me/sm_ms_bot'
        ],
        [
            'DN42',
            'ASN: 4242421888',
            '2016-08-16',
            '2017-07-26',
            null,
            'http://io.nixnodes.net/?dnmap&q=nixnodes&m_as=4242421888'
        ],
        [
            'BGP',
            'ASN: 133846',
            '2016-09-26',
            '2017-10-16',
            null,
            'https://bgp.he.net/AS133846'
        ],
        [
            'Storj Share',
            'Farmer (8TB)',
            '2017-08-15',
            '2017-10-16',
            null,
            'https://api.storj.io/contacts/2a58a683208088b4765502c7ff61c0a1f3e6b028'
        ],
        [
            'Ethereum JSON-RPC',
            '一个基于 Parity 的以太坊 JSON-RPC',
            '2017-06-26',
            '2017-06-26',
            '2017-09-10',
            'http://51.15.59.100:8545'
        ],
        [
            'NTP Server',
            'NTP 授时服务器，已加入 NTP Pool Project',
            '2017-01-16',
            '2017-08-16',
            '2017-09-20',
            'http://www.pool.ntp.org/scores/42.51.22.35'
        ],
        [
            'Sia Host',
            'Farmer (35GB)',
            '2017-02-09',
            '2017-07-26',
            '2017-09-11',
            'https://siahub.info/host/759'
        ],
        [
            'Ether Faucet',
            '自动发放以太坊测试链 Ropsten 的 ETH',
            '2017-08-17',
            '2017-08-23',
            null,
            'https://faucet.esd.cc'
        ],
        [
            'LibreNMS',
            '基于 SNMP 协议的服务器监控平台',
            '2017-08-18',
            '2017-09-01',
            null,
            'https://monitor.esd.cc'
        ],
        [
            'Looking Glass',
            '基于开源程序 bird-lg 的 BGP Looking Glass',
            '2017-09-16',
            '2017-09-26',
            null,
            'https://lg.imlonghao.com'
        ]
    ];
    projectList.sort(function (a, b) {
        return a[3] < b[3] ? 1 : -1;
    });
    projectList.forEach(function (project) {
        $('#myTable > tbody:last-child').append('<tr>' +
            '<td>' + project[0] + '</td>' +
            '<td>' + (project[4] === null ? 'Active' : 'Deactive') + '</td>' +
            '<td>' + project[1] + '</td>' +
            '<td>' + project[2] + '</td>' +
            '<td>' + project[3] + '</td>' +
            '<td>' + (project[4] === null ? 'N/A' : project[4]) + '</td>' +
            '<td>' + (project[4] === null ? cal(project[2], new Date()) : cal(project[2], project[4])) + ' 天</td>' +
            '<td><a href="' + project[5] + '" target="_blank" class="mdui-btn mdui-btn-raised">查看</a></td>' +
            '</tr>'
        )
    })
</script>
